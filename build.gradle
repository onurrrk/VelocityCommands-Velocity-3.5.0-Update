plugins {
    id "java"
    id "com.github.johnrengelman.shadow" version "8.1.1"
}

group = "dev.digitality"
version = "1.0.0"
description = "VelocityCommands"

repositories {
    mavenCentral()
    maven { url = "https://repo.papermc.io/repository/maven-public/" }
}

dependencies {
    compileOnly "com.velocitypowered:velocity-api:3.3.0-SNAPSHOT"
    
    implementation ("net.md-5:bungeecord-config:1.16-R0.4") {
        exclude group: 'org.yaml', module: 'snakeyaml'
    }
    implementation "org.yaml:snakeyaml:1.28"
    
    implementation "net.kyori:adventure-text-minimessage:4.14.0"

    compileOnly "org.projectlombok:lombok:1.18.30"
    annotationProcessor "org.projectlombok:lombok:1.18.30"
    annotationProcessor "com.velocitypowered:velocity-api:3.3.0-SNAPSHOT"
}

shadowJar {
    minimize()

    relocate 'net.md_5.bungee.config', 'dev.digitality.velocitycommands.libs.config'
    relocate 'org.yaml.snakeyaml', 'dev.digitality.velocitycommands.libs.snakeyaml'

    archiveFileName = "VelocityCommands.jar"
}

tasks.build.dependsOn tasks.shadowJar

sourceCompatibility = JavaVersion.VERSION_17
targetCompatibility = JavaVersion.VERSION_17
